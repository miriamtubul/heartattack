<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×“×©×‘×•×¨×“ ×—×™×–×•×™ ×”×ª×§×£ ×œ×‘</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
            color: #fff;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5em;
            color: #e94560;
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .tab-btn {
            padding: 15px 30px;
            background: #0f3460;
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab-btn:hover, .tab-btn.active {
            background: #e94560;
            transform: translateY(-3px);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* ××˜×¨×™×§×•×ª */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: linear-gradient(145deg, #0f3460, #1a1a2e);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .metric-card h3 {
            color: #a0a0a0;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .metric-card .value {
            font-size: 2.5em;
            font-weight: bold;
            color: #4ecca3;
        }

        .metric-card.highlight .value {
            color: #e94560;
        }

        /* ×’×¨×¤×™× */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
        }

        .chart-card {
            background: #0f3460;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .chart-card h3 {
            margin-bottom: 20px;
            color: #e94560;
        }

        /* ×˜×•×¤×¡ ×—×™×–×•×™ */
        .prediction-form {
            background: #0f3460;
            padding: 30px;
            border-radius: 15px;
            max-width: 900px;
            margin: 0 auto;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            margin-bottom: 8px;
            color: #a0a0a0;
            font-size: 0.9em;
        }

        .form-group input, .form-group select {
            padding: 12px;
            border: 2px solid #1a1a2e;
            border-radius: 8px;
            background: #1a1a2e;
            color: #fff;
            font-size: 1em;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #e94560;
        }

        .predict-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #e94560, #c23a51);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-size: 1.3em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .predict-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(233, 69, 96, 0.4);
        }

        .result-box {
            margin-top: 30px;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            display: none;
        }

        .result-box.high-risk {
            background: linear-gradient(135deg, #e94560, #c23a51);
        }

        .result-box.low-risk {
            background: linear-gradient(135deg, #4ecca3, #38a785);
        }

        .result-box h2 {
            font-size: 1.8em;
            margin-bottom: 15px;
        }

        .result-box .probability {
            font-size: 3em;
            font-weight: bold;
        }

        /* ×—×©×™×‘×•×ª ××©×ª× ×™× */
        .importance-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
        }

        .importance-section {
            background: #0f3460;
            padding: 25px;
            border-radius: 15px;
        }

        .importance-section h3 {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .importance-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #1a1a2e;
        }

        .importance-item:last-child {
            border-bottom: none;
        }

        .bar-container {
            width: 60%;
            height: 25px;
            background: #1a1a2e;
            border-radius: 12px;
            overflow: hidden;
        }

        .bar {
            height: 100%;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .bar.positive {
            background: linear-gradient(90deg, #e94560, #ff6b6b);
        }

        .bar.negative {
            background: linear-gradient(90deg, #4ecca3, #6bffc5);
        }

        /* Confusion Matrix */
        .confusion-matrix {
            display: grid;
            grid-template-columns: auto repeat(2, 1fr);
            gap: 5px;
            max-width: 400px;
            margin: 0 auto;
        }

        .cm-cell {
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            font-weight: bold;
        }

        .cm-header {
            background: #1a1a2e;
            color: #a0a0a0;
        }

        .cm-tn { background: #4ecca3; color: #000; }
        .cm-fp { background: #ffd93d; color: #000; }
        .cm-fn { background: #e94560; color: #fff; }
        .cm-tp { background: #4ecca3; color: #000; }

        .info-box {
            background: #1a1a2e;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-right: 4px solid #e94560;
        }

        @media (max-width: 768px) {
            .metrics-grid, .form-grid, .charts-grid, .importance-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>â¤ï¸ ×“×©×‘×•×¨×“ ×—×™×–×•×™ ×¡×™×›×•×Ÿ ×œ×”×ª×§×£ ×œ×‘</h1>
            <p>××•×“×œ ×¨×’×¨×¡×™×” ×œ×•×’×™×¡×˜×™×ª | ×“×™×•×§: 90%</p>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="showTab('metrics')">ğŸ“Š ××˜×¨×™×§×•×ª ×”××•×“×œ</button>
            <button class="tab-btn" onclick="showTab('predict')">ğŸ”® ×—×™×–×•×™ ×—×“×©</button>
            <button class="tab-btn" onclick="showTab('importance')">ğŸ“ˆ ×—×©×™×‘×•×ª ×”××©×ª× ×™×</button>
        </div>

        <!-- ×˜××‘ ××˜×¨×™×§×•×ª -->
        <div id="metrics" class="tab-content active">
            <div class="metrics-grid">
                <div class="metric-card">
                    <h3>Accuracy</h3>
                    <div class="value">90%</div>
                    <p>×“×™×•×§ ×›×œ×œ×™</p>
                </div>
                <div class="metric-card">
                    <h3>Precision</h3>
                    <div class="value">88%</div>
                    <p>××ª×•×š ×”×—×™×–×•×™×™× ×”×—×™×•×‘×™×™×</p>
                </div>
                <div class="metric-card highlight">
                    <h3>Recall â­</h3>
                    <div class="value">94%</div>
                    <p>×”×—×©×•×‘ ×‘×™×•×ª×¨ ×‘×¨×¤×•××”!</p>
                </div>
                <div class="metric-card">
                    <h3>F1-Score</h3>
                    <div class="value">91%</div>
                    <p>×××•×¦×¢ ×”×¨××•× ×™</p>
                </div>
            </div>

            <div class="charts-grid">
                <div class="chart-card">
                    <h3>××˜×¨×™×¦×ª ×‘×œ×‘×•×œ (Confusion Matrix)</h3>
                    <div class="confusion-matrix">
                        <div class="cm-cell"></div>
                        <div class="cm-cell cm-header">×—×™×–×•×™: 0</div>
                        <div class="cm-cell cm-header">×—×™×–×•×™: 1</div>
                        <div class="cm-cell cm-header">×××ª: 0</div>
                        <div class="cm-cell cm-tn">24<br><small>TN</small></div>
                        <div class="cm-cell cm-fp">4<br><small>FP</small></div>
                        <div class="cm-cell cm-header">×××ª: 1</div>
                        <div class="cm-cell cm-fn">2<br><small>FN</small></div>
                        <div class="cm-cell cm-tp">30<br><small>TP</small></div>
                    </div>
                    <div class="info-box">
                        <p><strong>False Negative (2):</strong> ×—×•×œ×™× ×©×–×•×”×• ×›×‘×¨×™××™× - ×”×›×™ ××¡×•×›×Ÿ!</p>
                        <p><strong>False Positive (4):</strong> ×‘×¨×™××™× ×©×–×•×”×• ×›×—×•×œ×™× - ×¤×—×•×ª ×—××•×¨</p>
                    </div>
                </div>

                <div class="chart-card">
                    <h3>×”×ª×¤×œ×’×•×ª ×”××˜×¨×™×§×•×ª</h3>
                    <canvas id="metricsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- ×˜××‘ ×—×™×–×•×™ -->
        <div id="predict" class="tab-content">
            <div class="prediction-form">
                <h2 style="text-align: center; margin-bottom: 30px;">ğŸ”® ×”×›× ×¡ × ×ª×•× ×™× ×œ×—×™×–×•×™</h2>

                <div class="form-grid">
                    <div class="form-group">
                        <label>×’×™×œ</label>
                        <input type="number" id="age" value="50" min="20" max="100">
                    </div>
                    <div class="form-group">
                        <label>××™×Ÿ</label>
                        <select id="sex">
                            <option value="1">×–×›×¨</option>
                            <option value="0">× ×§×‘×”</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>×¡×•×’ ×›××‘ ×‘×—×–×”</label>
                        <select id="cp">
                            <option value="0">×œ×œ× ×ª×¡××™× ×™×</option>
                            <option value="1">×× ×’×™× ×” ×˜×™×¤×•×¡×™×ª</option>
                            <option value="2">×× ×’×™× ×” ×œ× ×˜×™×¤×•×¡×™×ª</option>
                            <option value="3">×›××‘ ×œ× ×œ×‘×‘×™</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>×œ×—×¥ ×“× ×‘×× ×•×—×” (mm Hg)</label>
                        <input type="number" id="trtbps" value="120" min="80" max="200">
                    </div>
                    <div class="form-group">
                        <label>×›×•×œ×¡×˜×¨×•×œ (mg/dl)</label>
                        <input type="number" id="chol" value="200" min="100" max="600">
                    </div>
                    <div class="form-group">
                        <label>×¡×•×›×¨ ×‘×¦×•× > 120</label>
                        <select id="fbs">
                            <option value="0">×œ×</option>
                            <option value="1">×›×Ÿ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>×ª×•×¦××•×ª ECG ×‘×× ×•×—×”</label>
                        <select id="restecg">
                            <option value="0">×ª×§×™×Ÿ</option>
                            <option value="1">×—×¨×™×’×•×ª ST-T</option>
                            <option value="2">×”×’×“×œ×ª ×—×“×¨ ×©×××œ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>×“×•×¤×§ ××§×¡×™××œ×™</label>
                        <input type="number" id="thalachh" value="150" min="60" max="220">
                    </div>
                    <div class="form-group">
                        <label>×× ×’×™× ×” ×‘××××¥</label>
                        <select id="exng">
                            <option value="0">×œ×</option>
                            <option value="1">×›×Ÿ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>××¡×¤×¨ ×›×œ×™ ×“× ×¨××©×™×™×</label>
                        <select id="ca">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                        </select>
                    </div>
                </div>

                <button class="predict-btn" onclick="predict()">ğŸ”® ×‘×¦×¢ ×—×™×–×•×™</button>

                <div id="result" class="result-box">
                    <h2 id="result-text"></h2>
                    <div class="probability" id="result-prob"></div>
                    <canvas id="probChart" style="max-height: 200px; margin-top: 20px;"></canvas>
                </div>
            </div>
        </div>

        <!-- ×˜××‘ ×—×©×™×‘×•×ª ××©×ª× ×™× -->
        <div id="importance" class="tab-content">
            <div class="chart-card" style="margin-bottom: 30px;">
                <h3>××§×“××™ ×”××•×“×œ (×”×©×¤×¢×” ×¢×œ ×”×¡×™×›×•×Ÿ)</h3>
                <canvas id="importanceChart"></canvas>
            </div>

            <div class="importance-list">
                <div class="importance-section">
                    <h3>ğŸ”´ ××’×“×™×œ×™× ×¡×™×›×•×Ÿ (××§×“× ×—×™×•×‘×™)</h3>
                    <div class="importance-item">
                        <span>××™×Ÿ (×–×›×¨)</span>
                        <div class="bar-container">
                            <div class="bar positive" style="width: 90%;">0.87</div>
                        </div>
                    </div>
                    <div class="importance-item">
                        <span>××¡×¤×¨ ×›×œ×™ ×“×</span>
                        <div class="bar-container">
                            <div class="bar positive" style="width: 75%;">0.72</div>
                        </div>
                    </div>
                    <div class="importance-item">
                        <span>×× ×’×™× ×” ×‘××××¥</span>
                        <div class="bar-container">
                            <div class="bar positive" style="width: 60%;">0.58</div>
                        </div>
                    </div>
                    <div class="importance-item">
                        <span>×’×™×œ</span>
                        <div class="bar-container">
                            <div class="bar positive" style="width: 40%;">0.35</div>
                        </div>
                    </div>
                </div>

                <div class="importance-section">
                    <h3>ğŸŸ¢ ××§×˜×™× ×™× ×¡×™×›×•×Ÿ (××§×“× ×©×œ×™×œ×™)</h3>
                    <div class="importance-item">
                        <span>×›××‘ ×œ× ×œ×‘×‘×™ (cp_3)</span>
                        <div class="bar-container">
                            <div class="bar negative" style="width: 95%;">-1.12</div>
                        </div>
                    </div>
                    <div class="importance-item">
                        <span>×× ×’×™× ×” ×œ× ×˜×™×¤×•×¡×™×ª (cp_2)</span>
                        <div class="bar-container">
                            <div class="bar negative" style="width: 80%;">-0.94</div>
                        </div>
                    </div>
                    <div class="importance-item">
                        <span>×“×•×¤×§ ××§×¡×™××œ×™</span>
                        <div class="bar-container">
                            <div class="bar negative" style="width: 55%;">-0.62</div>
                        </div>
                    </div>
                    <div class="importance-item">
                        <span>×× ×’×™× ×” ×˜×™×¤×•×¡×™×ª (cp_1)</span>
                        <div class="bar-container">
                            <div class="bar negative" style="width: 45%;">-0.51</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="info-box" style="margin-top: 30px;">
                <h4>××™×š ×œ×§×¨×•× ××ª ×”×’×¨×£:</h4>
                <p>â€¢ <strong>××§×“× ×—×™×•×‘×™ ×’×‘×•×”</strong> = ×”××©×ª× ×” ××’×“×™×œ ××ª ×”×¡×™×›×•×Ÿ ×œ×”×ª×§×£ ×œ×‘</p>
                <p>â€¢ <strong>××§×“× ×©×œ×™×œ×™ × ××•×š</strong> = ×”××©×ª× ×” ××§×˜×™×Ÿ ××ª ×”×¡×™×›×•×Ÿ ×œ×”×ª×§×£ ×œ×‘</p>
                <p>â€¢ <strong>×¢×¨×š ××•×—×œ×˜ ×’×‘×•×”</strong> = ×”××©×ª× ×” ××©×¤×™×¢ ×™×•×ª×¨ ×¢×œ ×”×—×™×–×•×™</p>
            </div>
        </div>
    </div>

    <script>
        // ×”×—×œ×¤×ª ×˜××‘×™×
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // ×’×¨×£ ××˜×¨×™×§×•×ª
        new Chart(document.getElementById('metricsChart'), {
            type: 'bar',
            data: {
                labels: ['Accuracy', 'Precision', 'Recall', 'F1-Score'],
                datasets: [{
                    label: '×¦×™×•×Ÿ',
                    data: [90, 88, 94, 91],
                    backgroundColor: ['#4ecca3', '#4ecca3', '#e94560', '#4ecca3'],
                    borderRadius: 10
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        ticks: { color: '#fff' },
                        grid: { color: '#1a1a2e' }
                    },
                    x: {
                        ticks: { color: '#fff' },
                        grid: { display: false }
                    }
                },
                plugins: {
                    legend: { display: false }
                }
            }
        });

        // ×’×¨×£ ×—×©×™×‘×•×ª ××©×ª× ×™×
        new Chart(document.getElementById('importanceChart'), {
            type: 'bar',
            data: {
                labels: ['××™×Ÿ', '×›×œ×™ ×“×', '×× ×’×™× ×” ×‘××××¥', '×’×™×œ', '×œ×—×¥ ×“×', '×›×•×œ×¡×˜×¨×•×œ', '×¡×•×›×¨', 'ECG', '×“×•×¤×§ ××§×¡', 'cp_1', 'cp_2', 'cp_3'],
                datasets: [{
                    label: '××§×“×',
                    data: [0.87, 0.72, 0.58, 0.35, 0.12, 0.08, 0.05, -0.15, -0.62, -0.51, -0.94, -1.12],
                    backgroundColor: function(context) {
                        return context.raw >= 0 ? '#e94560' : '#4ecca3';
                    },
                    borderRadius: 5
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                scales: {
                    x: {
                        ticks: { color: '#fff' },
                        grid: { color: '#1a1a2e' }
                    },
                    y: {
                        ticks: { color: '#fff' },
                        grid: { display: false }
                    }
                },
                plugins: {
                    legend: { display: false }
                }
            }
        });

        // ××•×“×œ ×¨×’×¨×¡×™×” ×œ×•×’×™×¡×˜×™×ª (××§×“××™× ×××•×× ×™×)
        const coefficients = {
            age: 0.035,
            sex: 0.87,
            trtbps: 0.012,
            chol: 0.008,
            fbs: 0.05,
            thalachh: -0.032,
            exng: 0.58,
            ca: 0.72,
            cp_1: -0.51,
            cp_2: -0.94,
            cp_3: -1.12,
            restecg_1: -0.15,
            restecg_2: 0.10
        };
        const intercept = -2.5;

        function sigmoid(z) {
            return 1 / (1 + Math.exp(-z));
        }

        let probChart = null;

        function predict() {
            const age = parseFloat(document.getElementById('age').value);
            const sex = parseFloat(document.getElementById('sex').value);
            const cp = parseInt(document.getElementById('cp').value);
            const trtbps = parseFloat(document.getElementById('trtbps').value);
            const chol = parseFloat(document.getElementById('chol').value);
            const fbs = parseFloat(document.getElementById('fbs').value);
            const restecg = parseInt(document.getElementById('restecg').value);
            const thalachh = parseFloat(document.getElementById('thalachh').value);
            const exng = parseFloat(document.getElementById('exng').value);
            const ca = parseFloat(document.getElementById('ca').value);

            // ×—×™×©×•×‘ z
            let z = intercept;
            z += coefficients.age * age;
            z += coefficients.sex * sex;
            z += coefficients.trtbps * trtbps;
            z += coefficients.chol * chol;
            z += coefficients.fbs * fbs;
            z += coefficients.thalachh * thalachh;
            z += coefficients.exng * exng;
            z += coefficients.ca * ca;
            z += coefficients.cp_1 * (cp === 1 ? 1 : 0);
            z += coefficients.cp_2 * (cp === 2 ? 1 : 0);
            z += coefficients.cp_3 * (cp === 3 ? 1 : 0);
            z += coefficients.restecg_1 * (restecg === 1 ? 1 : 0);
            z += coefficients.restecg_2 * (restecg === 2 ? 1 : 0);

            const probability = sigmoid(z);
            const prediction = probability >= 0.5 ? 1 : 0;

            const resultBox = document.getElementById('result');
            const resultText = document.getElementById('result-text');
            const resultProb = document.getElementById('result-prob');

            resultBox.style.display = 'block';

            if (prediction === 1) {
                resultBox.className = 'result-box high-risk';
                resultText.textContent = 'âš ï¸ ×¡×™×›×•×Ÿ ×’×‘×•×” ×œ×”×ª×§×£ ×œ×‘';
                resultProb.textContent = (probability * 100).toFixed(1) + '%';
            } else {
                resultBox.className = 'result-box low-risk';
                resultText.textContent = 'âœ… ×¡×™×›×•×Ÿ × ××•×š ×œ×”×ª×§×£ ×œ×‘';
                resultProb.textContent = ((1 - probability) * 100).toFixed(1) + '%';
            }

            // ×’×¨×£ ×”×¡×ª×‘×¨×•×™×•×ª
            if (probChart) probChart.destroy();
            probChart = new Chart(document.getElementById('probChart'), {
                type: 'doughnut',
                data: {
                    labels: ['×¡×™×›×•×Ÿ ×’×‘×•×”', '×¡×™×›×•×Ÿ × ××•×š'],
                    datasets: [{
                        data: [probability * 100, (1 - probability) * 100],
                        backgroundColor: ['#e94560', '#4ecca3'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: { color: '#fff' }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
